<?xml version="1.0"?>

<xacro:root xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- Included URDF Files -->
  <!-- <xacro:include filename="$(find-pkg-share segbot_description)/urdf/segbot_wheel.urdf.xacro" /> -->
  <xacro:include filename="$(find segbot_description)/urdf/segbot_wheel.urdf.xacro" />

  <xacro:macro name="bigbot">

    <!-- robot link, on the ground just below the robot origin -->
    <link name="base_footprint">
     <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <box size="0.001 0.001 0.001" />
        </geometry>
      </visual>
    </link>

    <joint name="base_footprint_joint" type="fixed">
      <origin xyz="0.0 0 0.2165" rpy="0 0 0" />
      <parent link="base_footprint"/>
      <child link="base_link" />
    </joint>

    <!-- This is the robot origin, center of the 2 wheels (axis of rotation) -->
    <link name="base_link">
      <xacro:segbot_base_link_inertial />
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://segbot_description/meshes/rmp50-base-link.dae" scale="0.0254 0.0254 0.0254"/>     
        </geometry>
      </visual>
      <xacro:segbot_base_link_collision />
    </link>

    <xacro:gazebo_laser_obstacle />
    <xacro:gazebo_segbot_base_link_surface />

    <!-- Castor joint -->
    <joint name="base_caster_support_joint" type="continuous">
      <origin xyz="-0.3292 0 -0.0485" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="base_caster_support_link"/>
      <axis xyz="0 0 1" />
    </joint>

    <link name="base_caster_support_link">
      <inertial>
        <mass value="1"/>
        <origin xyz="0 0 0" />
        <inertia ixx="0.00375" ixy="0.0" ixz="0.0"
          iyy="0.00375" iyz="0.0"
          izz="0.00375" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://segbot_description/meshes/rmp50-castor-link.dae" scale="0.0254 0.0254 0.0254"/>
        </geometry>
      </visual>
      <xacro:segbot_castor_support_link_collision />
    </link>

    <!-- Castor wheel -->
    <joint name="caster_wheel_joint" type="continuous">
      <origin xyz="-0.0397 0 -0.0918" rpy="0 0 0" />
      <parent link="base_caster_support_link" />
      <child link="caster_wheel_link" />
      <axis xyz="0 1 0" />
    </joint>

    <link name="caster_wheel_link">
      <inertial>
        <mass value="2" /> 
        <origin xyz="0 0 0" rpy="0 0 0" />
        <inertia  ixx="0.003" ixy="0.0" ixz="0.0"
          iyy="0.00581" iyz="0.0"
          izz="0.003" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://segbot_description/meshes/rmp50-castor-wheel.dae" scale="0.0254 0.0254 0.0254"/>
        </geometry>
      </visual>
      <xacro:segbot_castor_wheel_link_collision />
    </link>

    <xacro:gazebo_segbot_castor_wheel_link_surface />

    <!-- Left wheel -->
    <xacro:segbot_wheel suffix="left" parent="base_link">
      <origin xyz="0 0.2689 0.0239" rpy="0 0 0" />
    </xacro:segbot_wheel>

    <!-- Right wheel -->
    <xacro:segbot_wheel suffix="right" parent="base_link">
      <origin xyz="0 -0.2689 0.0239" rpy="0 0 0" />
    </xacro:segbot_wheel>     

    <!-- <xacro:segbot_wheel suffix="left" parent="base_link" origin="0 0.2689 0.0239"/>
    <xacro:segbot_wheel suffix="right" parent="base_link" origin="0 -0.2689 0.0239"/> -->


  </xacro:macro>
</xacro:root>
